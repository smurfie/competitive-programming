(() => {
  function solve(input, phases) {
    var arr = input.split("").map((i) => parseInt(i));
    var pattern = [0, 1, 0, -1];
    for (var i = 0; i < phases; i++) {
      arr = fft(arr, pattern);
    }

    return arr.join("").substring(0, 8);
  }

  function fft(arr, pattern) {
    var arr2 = [];
    for (var i = 0; i < arr.length; i++) {
      var sum = 0;
      for (var j = 0; j < arr.length; j++) {
        var index = Math.floor((j + 1) / (i + 1)) % pattern.length;
        sum += arr[j] * pattern[index];
      }
      arr2[i] = Math.abs(sum) % 10;
    }
    return arr2;
  }

  var dataset = [];

  dataset.push({
    input: `12345678`,
    phases: 1,
    output: "48226158"
  });

  dataset.push({
    input: `12345678`,
    phases: 4,
    output: "01029498"
  });

  dataset.push({
    input: `80871224585914546619083218645595`,
    phases: 100,
    output: "24176176"
  });

  dataset.push({
    input: `19617804207202209144916044189917`,
    phases: 100,
    output: "73745418"
  });

  dataset.push({
    input: `69317163492948606335995924319873`,
    phases: 100,
    output: "52432133"
  });

  dataset.push({
    input: `59740570066545297251154825435366340213217767560317431249230856126186684853914890740372813900333546650470120212696679073532070321905251098818938842748495771795700430939051767095353191994848143745556802800558539768000823464027739836197374419471170658410058272015907933865039230664448382679990256536462904281204159189130560932257840180904440715926277456416159792346144565015659158009309198333360851441615766440174908079262585930515201551023564548297813812053697661866316093326224437533276374827798775284521047531812721015476676752881281681617831848489744836944748112121951295833143568224473778646284752636203058705797036682752546769318376384677548240590`,
    phases: 100,
    output: "50053207"
  });

  Utils.check(solve, dataset, "16a");
})();
