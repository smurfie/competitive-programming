(() => {
  function solve(input, expansion) {
    let lines = Utils.read(input);
    let emptyX = [];
    let emptyY = [];
    let galaxies = [];

    for (let i = 0; i < lines.length; i++) {
      let isEmpty = true;
      for (let j = 0; j < lines[0].length && isEmpty; j++) {
        if (lines[i][j] === "#") {
          isEmpty = false;
        }
      }
      if (isEmpty) {
        emptyX.push(i);
      }
    }

    for (let i = 0; i < lines[0].length; i++) {
      let isEmpty = true;
      for (let j = 0; j < lines.length && isEmpty; j++) {
        if (lines[j][i] === "#") {
          isEmpty = false;
        }
      }
      if (isEmpty) {
        emptyY.push(i);
      }
    }

    let emptyXi = 0;

    for (let i = 0; i < lines.length; i++) {
      if (emptyXi < emptyX.length && i === emptyX[emptyXi]) {
        emptyXi++;
      }
      let emptyYi = 0;
      for (let j = 0; j < lines[0].length; j++) {
        if (emptyYi < emptyY.length && j === emptyY[emptyYi]) {
          emptyYi++;
        }
        if (lines[i][j] === "#") {
          galaxies.push([
            i + (expansion - 1) * emptyXi,
            j + (expansion - 1) * emptyYi
          ]);
        }
      }
    }

    var sum = 0;
    for (let i = 0; i < galaxies.length - 1; i++) {
      for (let j = i + 1; j < galaxies.length; j++) {
        sum +=
          Math.abs(galaxies[i][0] - galaxies[j][0]) +
          Math.abs(galaxies[i][1] - galaxies[j][1]);
      }
    }

    return sum;
  }

  let dataset = [];

  dataset.push({
    input: `...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#.....`,
    expansion: 10,
    output: 1030
  });

  dataset.push({
    input: `...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#.....`,
    expansion: 100,
    output: 8410
  });

  dataset.push({
    input: `............................................#.........#.......#.................#.......#........#..........................................
......................................#.........................................................................#.........................#.
#........................................................................................................................#..................
.....#...................................................#..................................................................................
.......................................................................#..................#..............#...........#......................
............#........#...................#..........................................................#........................#..............
...............................#......................................................................................................#.....
................................................#.....#.........#................................................................#..........
#........#.......................................................................................#........................#.................
..........................................................#...........................#.....................................................
.......................................................................#....................................#...............................
............#.................#.....#..............#..........................#.............................................................
....................#........................#............................................#............#...............#....................
...#....................................................#...................................................................................
.................................#...............................#...................#...........................#............#.............
.................................................................................................#..........................................
................................................#...........................#...............#...............................................
.#........#.............#...........................................................................................#............#..........
................#....................#......................................................................#.............................#.
................................#............#.....................#........................................................................
.....................#................................................................#......................................#..............
........................................#..........#.......#..................................#........................................#....
.....#..........................................................#..............#.......................#.............#......................
..............................#...........................................................#........................................#........
.........#.......................................................................................................#..........................
......................#............................................#........................................................................
.......................................#.....#...................................#...............#...........#.........#....................
..........................................................................#.............#...................................#...............
#......#.................#.........................................................................................#........................
...............#........................................#.....#.....................#...............#....................................#..
...................................#..........................................#..........................................#.......#..........
....................................................................#.......................#...............................................
.................................................#..........................................................................................
.........................................#................................#...........................................................#.....
#..............................#..........................#..........................#..........................#...........................
.....#..............#...........................................................#........................#....................#.............
...............#............................................................................................................................
.............................................#.....#.................................................#......................................
............................................................................................................................................
.....................................#.................#......#.................................#...........................................
..........................................#.................................#.............#.................................#...............
.................................................................................#................................#..............#..........
..........#...........#....................................................................................#................................
...............#..............#.....................................#................................#....................................#.
#.....................................#.......#.......#...................................................................#.................
............................................................................................................................................
............................................................................................#...............................................
........#...........#.............#.............................................#.........................#........#........................
.............................#.............#..................................................................................#.............
.......................................................#..........#...................................#.......#......................#......
.....#.................................................................................#........#...........................................
...........................................................................#................................................................
..............#..........................#..................................................................................................
..#.........................#.......#................#.....................................#.........................#......................
...................................................................................#......................................#.................
..................#.............................#.............#....................................#.........#........................#.....
............................................................................................................................................
.......................................................#..............................#.........................................#...........
.............................#...................................................#............#............................................#
............................................................................................................................................
...................................#...........#................#..............................................#........#..............#....
.#......#...........#.....#.............#..................#........................................#.......................................
............................................................................................#................................#..............
............................................................................................................................................
....#........#...................#....................#............#......#.......#.......................................................#.
..............................................#..............#.................................#....................#.......................
............................................................................................................................................
#......................#.....................................................#.............................................#................
........#................................#..........................................#.......................#...............................
.......................................................................................................#...........................#........
..................#...........#................#............................................................................................
............#.....................................................................................#.......................................#.
......................#.....................................................................................................................
....................................................................#..........................................#............................
..........................................#...........#...................................#.............#...................................
...#................................................................................................................#........#..............
...............................#..............................#.................#...........................#...............................
......................................#...........#.........................................................................................
.................#...........................#........................#..............................................................#......
........................#.............................................................................#.....................................
..........#.......................#..............................#....................#.........#.......................#...................
..#.........................................................................................................................................
.................................................................................#........#..................#....................#.........
............................................................................................................................................
............................................................................................................................................
...............................#......................#..............................................................................#......
.......................#..................#.........................#.......#....................#..........................................
....#.........................................................................................................#.................#...........
..............#...................#...........#..............#......................#.......................................................
............................................................................................................................................
..............................#..............................................................#.....................................#........
.....................................#.......................................#.........#..........#....................#....................
......#...........................................#.................#.......................................................................
#...........#.......#..................................#..............................................#......................#..............
................................#...................................................................................#.......................
............................................#................#..............................................................................
..........................................................................#..................................#..............................
.......#....................................................................................#..........................#.........#..........
..#...........#......................................................................#..................................................#...
...........................................................#.....#..........................................................................
..................#...............#................................................................#........................................
............................................................................................................................................
#......................#...............................#....................#..................................#..........#........#........
..........................................................................................#.................................................
...........#................#..............................................................................................................#
...........................................................#........................#.............#.........................................
................................................#...........................................................................................
...................#.....#..........#......................................................................#.....#...................#......
........#......................#............................................................#.........................#.....................
..............#..............................................................#.........#....................................................
....................................................................#..........................................................#............
#..............................................#............................................................................................
.....#........................................................................................................#.............................
......................#................#.........................#........................#.........................................#.......
............................................#......#...............................#..............#.........................................
.................................#..........................................................................................................
..........................#...................................#.........#...................................................................
..........#.................................................................................................................#...............
#...............#...........................................................#..........................................................#....
..............................................................................................#..................................#..........
......................#....................#........................................#.............................#........................#
................................................#......#....................................................................................
.......................................................................#..............................#......#..............................
.........................#.................................................................#.....#........................#.................
.#..................#..........#......................................................#.....................................................
..........#..............................................#........#.........................................................................
.......................................#.............................................................................#..............#.......
............................#.................#...................................#........................................................#
.....................................................#..........................................................................#...........
....#..........#.........................................................................................#......#...........................
......................#.....................................................................................................................
...........#.............................#.............................#................................................#...................
..................#..................................................................#......................................................
.............................#.........................................................................#.....................#.........#....
........#..................................................................#..............#.................................................
#........................................................#.........#........................................................................
.......................................#........#.............................................................#.............................
...................#..............#................................................................#.....#.........#........................
.............#.....................................................................#.....................................#............#.....
......#...................................................................#.....................................................#...........`,
    expansion: 1000000,
    output: 790194712336
  });

  Utils.check(solve, dataset, "11b");
})();
